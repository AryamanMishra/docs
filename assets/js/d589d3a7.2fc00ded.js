"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[162],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){i(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var p=n.createContext({}),s=function(e){var t=n.useContext(p),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},d=function(e){var t=s(e.components);return n.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),c=s(a),m=i,h=c["".concat(p,".").concat(m)]||c[m]||u[m]||r;return a?n.createElement(h,o(o({ref:t},d),{},{components:a})):n.createElement(h,o({ref:t},d))}));function m(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=a.length,o=new Array(r);o[0]=c;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},9390:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>p,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var n=a(7462),i=(a(7294),a(3905));const r={title:"Getting Started",sidebar_position:2},o=void 0,l={unversionedId:"getting-started",id:"getting-started",title:"Getting Started",description:"OpenLineage is an open framework for data lineage collection and analysis. At its core is an extensible specification that systems can use to interoperate with lineage metadata.",source:"@site/docs/getting-started.md",sourceDirName:".",slug:"/getting-started",permalink:"/getting-started",draft:!1,editUrl:"https://github.com/OpenLineage/docs/tree/main/docs/getting-started.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Getting Started",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"About OpenLineage",permalink:"/"},next:{title:"Object Model",permalink:"/spec/object-model"}},p={},s=[{value:"OpenLineage Core Model",id:"openlineage-core-model",level:2},{value:"BEFORE:",id:"before",level:4},{value:"WITH OPENLINEAGE:",id:"with-openlineage",level:4},{value:"Design",id:"design",level:3},{value:"Benefits",id:"benefits",level:3},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Run Marquez with Docker",id:"run-marquez-with-docker",level:3},{value:"Collect Run-Level Metadata",id:"collect-run-level-metadata",level:2},{value:"Step 1: Start a Run",id:"step-1-start-a-run",level:3},{value:"REQUEST",id:"request",level:4},{value:"RESPONSE",id:"response",level:4},{value:"Step 2: Complete a Run",id:"step-2-complete-a-run",level:3},{value:"REQUEST",id:"request-1",level:4},{value:"RESPONSE",id:"response-1",level:4},{value:"View Collected Lineage Metadata",id:"view-collected-lineage-metadata",level:2},{value:"Search Job Metadata",id:"search-job-metadata",level:3},{value:"View Job Metadata",id:"view-job-metadata",level:3},{value:"View Input Dataset Metadata",id:"view-input-dataset-metadata",level:3},{value:"Summary",id:"summary",level:2},{value:"Next Steps",id:"next-steps",level:2},{value:"Feedback",id:"feedback",level:2}],d={toc:s};function u(e){let{components:t,...r}=e;return(0,i.kt)("wrapper",(0,n.Z)({},d,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"OpenLineage is an open framework for data lineage collection and analysis. At its core is an extensible specification that systems can use to interoperate with lineage metadata."),(0,i.kt)("p",null,"This guide covers how you can quickly get started collecting ",(0,i.kt)("em",{parentName:"p"},"dataset"),", ",(0,i.kt)("em",{parentName:"p"},"job"),", and ",(0,i.kt)("em",{parentName:"p"},"run")," metadata using OpenLineage. We'll first introduce you to OpenLineage's core model, show how to collect ",(0,i.kt)("em",{parentName:"p"},"run-level")," metadata as OpenLineage events using ",(0,i.kt)("a",{parentName:"p",href:"https://marquezproject.ai"},"Marquez")," as the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage#scope"},"HTTP backend"),", then explore lineage metadata via the Marquez UI."),(0,i.kt)("h2",{id:"openlineage-core-model"},"OpenLineage Core Model"),(0,i.kt)("p",null,"Below, we illustrate the challenges of collecting lineage metadata from multiple sources, schedulers and/or data processing frameworks. We then outline the design benefits of defining an ",(0,i.kt)("em",{parentName:"p"},"Open Standard")," for lineage metadata collection."),(0,i.kt)("h4",{id:"before"},"BEFORE:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:a(5429).Z,width:"891",height:"425"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Each project has to instrument it's own custom metadata collection integration, therefore duplicating efforts."),(0,i.kt)("li",{parentName:"ul"},"Integrations are external and can break with new versions of the underlying scheduler and/or data processing framework, requiring projects to ensure ",(0,i.kt)("em",{parentName:"li"},"backwards")," compatibility.")),(0,i.kt)("h4",{id:"with-openlineage"},"WITH OPENLINEAGE:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:a(2769).Z,width:"811",height:"418"})),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Integration efforts are shared ",(0,i.kt)("em",{parentName:"li"},"across")," projects."),(0,i.kt)("li",{parentName:"ul"},"Integrations can be ",(0,i.kt)("em",{parentName:"li"},"pushed")," to the underlying scheduler and/or data processing framework; no need to play catch up and ensure compatibility!")),(0,i.kt)("h3",{id:"design"},"Design"),(0,i.kt)("p",null,"OpenLineage is an ",(0,i.kt)("em",{parentName:"p"},"Open Standard")," for lineage metadata collection designed to record metadata for a ",(0,i.kt)("em",{parentName:"p"},"job")," in execution. The standard defines a generic model of ",(0,i.kt)("em",{parentName:"p"},"dataset"),", ",(0,i.kt)("em",{parentName:"p"},"job"),", and ",(0,i.kt)("em",{parentName:"p"},"run")," entities uniquely identified using consistent naming strategies. The core model is highly extensible via facets. A ",(0,i.kt)("strong",{parentName:"p"},"facet")," is user-defined metadata and enables entity enrichment. We encourage you to familiarize yourself with the core model below:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:a(7816).Z,width:"516",height:"140"})),(0,i.kt)("h3",{id:"benefits"},"Benefits"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"An ",(0,i.kt)("strong",{parentName:"li"},"open standard")," with a specification for collecting ",(0,i.kt)("strong",{parentName:"li"},"lineage")," metadata."),(0,i.kt)("li",{parentName:"ul"},"Focuses on ",(0,i.kt)("strong",{parentName:"li"},"job-level")," execution.",(0,i.kt)("ul",{parentName:"li"},(0,i.kt)("li",{parentName:"ul"},"Runs"),(0,i.kt)("li",{parentName:"ul"},"Datasets"))),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Event-based")," metadata collection."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"Extensible")," model via ",(0,i.kt)("strong",{parentName:"li"},"facets"),".")),(0,i.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,i.kt)("p",null,"Before you begin, make sure you have installed:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.docker.com/install"},"Docker 17.05"),"+"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"https://docs.docker.com/compose/install"},"Docker Compose"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note:")," In this guide, we'll be using Marquez as the OpenLineage HTTP backend and running the HTTP server via Docker.")),(0,i.kt)("h3",{id:"run-marquez-with-docker"},"Run Marquez with ",(0,i.kt)("a",{parentName:"h3",href:"https://github.com/MarquezProject/marquez/blob/main/Dockerfile"},"Docker")),(0,i.kt)("p",null,"The easiest way to get up and running with Marquez is Docker. Check out the Marquez source code and run the ",(0,i.kt)("inlineCode",{parentName:"p"},"./docker/up.sh")," script:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"$ git clone git@github.com:MarquezProject/marquez.git && cd marquez\n\n$ ./docker/up.sh\n")),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Tip:")," Pass the ",(0,i.kt)("inlineCode",{parentName:"p"},"--build")," flag to the script to build images from source, or ",(0,i.kt)("inlineCode",{parentName:"p"},"--tag X.Y.Z")," to use a tagged image.")),(0,i.kt)("p",null,"To view the Marquez UI and verify it's running, open ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:3000"},"http://localhost:3000"),". The UI enables you to discover dependencies between jobs and the datasets they produce and consume via the lineage graph, view run-level metadata of current and previous job runs, and much more."),(0,i.kt)("h2",{id:"collect-run-level-metadata"},"Collect Run-Level Metadata"),(0,i.kt)("p",null,"Marquez is an ",(0,i.kt)("a",{parentName:"p",href:"https://lfaidata.foundation"},"LF AI & DATA")," incubation project to collect, aggregate, and visualize a data ecosystem\u2019s metadata. Marquez is the reference implementation of the OpenLineage standard."),(0,i.kt)("p",null,"In this example, we show how you can collect dataset and job metadata using Marquez. Using the ",(0,i.kt)("a",{parentName:"p",href:"https://marquezproject.github.io/marquez/openapi.html#tag/Lineage"},"LineageAPI"),", metadata will be collected as OpenLineage events using the run ID ",(0,i.kt)("inlineCode",{parentName:"p"},"d46e465b-d358-4d32-83d4-df660ff614dd"),". The run ID will enable the tracking of run-level metadata over time for the job ",(0,i.kt)("inlineCode",{parentName:"p"},"my-job"),". So, let's get started!"),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},(0,i.kt)("strong",{parentName:"p"},"Note:")," The example shows how to collect metadata via direct HTTP API calls using ",(0,i.kt)("inlineCode",{parentName:"p"},"curl"),". But, you can also get started using our client library for ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/MarquezProject/marquez/tree/main/clients/java"},"Java")," or ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/MarquezProject/marquez/tree/main/clients/python"},"Python"),".")),(0,i.kt)("h3",{id:"step-1-start-a-run"},"Step 1: Start a Run"),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"d46e465b-d358-4d32-83d4-df660ff614dd")," to ",(0,i.kt)("strong",{parentName:"p"},"start")," the run for ",(0,i.kt)("inlineCode",{parentName:"p"},"my-job")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"my-input")," as the input dataset:"),(0,i.kt)("h4",{id:"request"},"REQUEST"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl -X POST http://localhost:5000/api/v1/lineage \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n        "eventType": "START",\n        "eventTime": "2020-12-28T19:52:00.001+10:00",\n        "run": {\n          "runId": "d46e465b-d358-4d32-83d4-df660ff614dd"\n        },\n        "job": {\n          "namespace": "my-namespace",\n          "name": "my-job"\n        },\n        "inputs": [{\n          "namespace": "my-namespace",\n          "name": "my-input"\n        }],  \n        "producer": "https://github.com/OpenLineage/OpenLineage/blob/v1-0-0/client"\n      }\'\n')),(0,i.kt)("h4",{id:"response"},"RESPONSE"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"201 CREATED")),(0,i.kt)("h3",{id:"step-2-complete-a-run"},"Step 2: Complete a Run"),(0,i.kt)("p",null,"Use ",(0,i.kt)("inlineCode",{parentName:"p"},"d46e465b-d358-4d32-83d4-df660ff614dd")," to ",(0,i.kt)("strong",{parentName:"p"},"complete")," the run for ",(0,i.kt)("inlineCode",{parentName:"p"},"my-job")," with ",(0,i.kt)("inlineCode",{parentName:"p"},"my-output")," as the output dataset. We also specify the ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/OpenLineage/OpenLineage/blob/main/spec/OpenLineage.md#dataset-facets"},"schema")," ",(0,i.kt)("strong",{parentName:"p"},"facet")," to collect the schema for ",(0,i.kt)("inlineCode",{parentName:"p"},"my-output")," before marking the run as completed. Note, you don't have to specify the input dataset ",(0,i.kt)("inlineCode",{parentName:"p"},"my-input")," again for the run since it already has been associated with the run ID:"),(0,i.kt)("h4",{id:"request-1"},"REQUEST"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'$ curl -X POST http://localhost:5000/api/v1/lineage \\\n  -H \'Content-Type: application/json\' \\\n  -d \'{\n        "eventType": "COMPLETE",\n        "eventTime": "2020-12-28T20:52:00.001+10:00",\n        "run": {\n          "runId": "d46e465b-d358-4d32-83d4-df660ff614dd"\n        },\n        "job": {\n          "namespace": "my-namespace",\n          "name": "my-job"\n        },\n        "outputs": [{\n          "namespace": "my-namespace",\n          "name": "my-output",\n          "facets": {\n            "schema": {\n              "_producer": "https://github.com/OpenLineage/OpenLineage/blob/v1-0-0/client",\n              "_schemaURL": "https://github.com/OpenLineage/OpenLineage/blob/v1-0-0/spec/OpenLineage.json#/definitions/SchemaDatasetFacet",\n              "fields": [\n                { "name": "a", "type": "VARCHAR"},\n                { "name": "b", "type": "VARCHAR"}\n              ]\n            }\n          }\n        }],     \n        "producer": "https://github.com/OpenLineage/OpenLineage/blob/v1-0-0/client"\n      }\'\n')),(0,i.kt)("h4",{id:"response-1"},"RESPONSE"),(0,i.kt)("p",null,(0,i.kt)("inlineCode",{parentName:"p"},"201 CREATED")),(0,i.kt)("h2",{id:"view-collected-lineage-metadata"},"View Collected Lineage Metadata"),(0,i.kt)("h3",{id:"search-job-metadata"},"Search Job Metadata"),(0,i.kt)("p",null,"To view lineage metadata collected by Marquez, browse to the UI by visiting ",(0,i.kt)("a",{parentName:"p",href:"http://localhost:3000"},"http://localhost:3000"),". Then, use the search bar in the upper right-side of the page and search for the job ",(0,i.kt)("inlineCode",{parentName:"p"},"my-job"),". To view lineage metadata for ",(0,i.kt)("inlineCode",{parentName:"p"},"my-job"),", click on the job from the drop-down list:"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:a(1840).Z,width:"1180",height:"718"})),(0,i.kt)("h3",{id:"view-job-metadata"},"View Job Metadata"),(0,i.kt)("p",null,"You should see the job ",(0,i.kt)("inlineCode",{parentName:"p"},"namespace"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"my-input")," as an input dataset and ",(0,i.kt)("inlineCode",{parentName:"p"},"my-output")," as an output dataset in the lineage graph and the job run marked as ",(0,i.kt)("inlineCode",{parentName:"p"},"COMPLETED "),": "),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:a(4536).Z,width:"2180",height:"1178"})),(0,i.kt)("h3",{id:"view-input-dataset-metadata"},"View Input Dataset Metadata"),(0,i.kt)("p",null,"Finally, click on the output dataset ",(0,i.kt)("inlineCode",{parentName:"p"},"my-output")," for ",(0,i.kt)("inlineCode",{parentName:"p"},"my-job"),". You should see the dataset ",(0,i.kt)("inlineCode",{parentName:"p"},"name"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"schema"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"description"),":"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"image",src:a(45).Z,width:"2182",height:"1156"})),(0,i.kt)("h2",{id:"summary"},"Summary"),(0,i.kt)("p",null,"In this simple example, we showed you how to use Marquez to collect dataset and job metadata with Openlineage. We also walked you through the set of HTTP ",(0,i.kt)("a",{parentName:"p",href:"https://marquezproject.github.io/marquez/openapi.html"},"API")," calls to successfully mark a run as ",(0,i.kt)("strong",{parentName:"p"},"complete")," and view the lineage metadata collected with Marquez."),(0,i.kt)("h2",{id:"next-steps"},"Next Steps"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Take a look at Marquez's Airflow ",(0,i.kt)("a",{parentName:"li",href:"https://github.com/MarquezProject/marquez/tree/main/examples/airflow"},"example")," to learn how to enable OpenLineage metadata collection for Airflow DAGs and troubleshoot failing DAGs using Marquez."),(0,i.kt)("li",{parentName:"ul"},"Listen to ",(0,i.kt)("a",{parentName:"li",href:"https://www.dataengineeringpodcast.com/marquez-data-lineage-episode-111"},"Solving Data Lineage Tracking And Data Discovery At WeWork"),"."),(0,i.kt)("li",{parentName:"ul"},"Listen to ",(0,i.kt)("a",{parentName:"li",href:"https://www.dataengineeringpodcast.com/openlineage-data-lineage-specification-episode-187"},"Unlocking The Power of Data Lineage In Your Platform with OpenLineage"),".")),(0,i.kt)("h2",{id:"feedback"},"Feedback"),(0,i.kt)("p",null,"What did you think of this guide? We would love to hear feedback, and we can be found on the ",(0,i.kt)("a",{parentName:"p",href:"http://bit.ly/OpenLineageSlack"},"OpenLineage Slack"),"."))}u.isMDXComponent=!0},5429:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/before-ol-66bced130b7917da3e28f441c04f8ba9.svg"},1840:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/marquez-search-view-job-209b7e9b69daa47e5185846b3ee6f75a.png"},45:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/marquez-tab-view-dataset-output-6923ea42dbf12414356a65db4b0f6d59.png"},4536:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/marquez-tab-view-job-completed-d48aca52315d7ebf79fe76063ab7fe80.png"},7816:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/model-a6a03d737a81fc07e1af16e1ccb695c7.svg"},2769:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/with-ol-ddff6a87da85a40c132be0b911b497e2.svg"}}]);