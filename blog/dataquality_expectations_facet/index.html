<!doctype html>
<html lang="en" dir="ltr" class="blog-wrapper blog-post-page plugin-blog plugin-id-default">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Expecting Great Quality with OpenLineage Facets | OpenLineage Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.openlineage.io/blog/dataquality_expectations_facet"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docusaurus_tag" content="default"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docsearch:docusaurus_tag" content="default"><meta data-rh="true" property="og:title" content="Expecting Great Quality with OpenLineage Facets | OpenLineage Docs"><meta data-rh="true" name="description" content="Good data is paramount to making good decisions- but how can you trust the quality of your data and its dependencies?"><meta data-rh="true" property="og:description" content="Good data is paramount to making good decisions- but how can you trust the quality of your data and its dependencies?"><meta data-rh="true" property="og:image" content="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gQ3JlYXRlZCB3aXRoIFZlY3Rvcm5hdG9yIChodHRwOi8vdmVjdG9ybmF0b3IuaW8vKSAtLT4KPHN2ZyBoZWlnaHQ9IjEwMCUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9ImZpbGwtcnVsZTpub256ZXJvO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc5Ni41IDU0Mi41IiB3aWR0aD0iMTAwJSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp2ZWN0b3JuYXRvcj0iaHR0cDovL3ZlY3Rvcm5hdG9yLmlvIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxkZWZzLz4KPGNsaXBQYXRoIGlkPSJBcnRib2FyZEZyYW1lIj4KPHJlY3QgaGVpZ2h0PSI1NDIuNSIgd2lkdGg9Ijc5Ni41IiB4PSIwIiB5PSIwIi8+CjwvY2xpcFBhdGg+CjxnIGNsaXAtcGF0aD0idXJsKCNBcnRib2FyZEZyYW1lKSIgaWQ9IlVudGl0bGVkIiB2ZWN0b3JuYXRvcjpsYXllck5hbWU9IlVudGl0bGVkIj4KPHBhdGggZD0iTTAgMEw3OTYuNSAwTDc5Ni41IDBMNzk2LjUgNTQyLjVMNzk2LjUgNTQyLjVMMCA1NDIuNUwwIDU0Mi41TDAgMEwwIDBaIiBmaWxsPSIjNTMzZjM1IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTUuOSAxNTEuM0wyNDQuOSA1MzMuNkwxMzE4LjItMTA1LjZMMTA4OS4yLTQ4Ny45TDE1LjkgMTUxLjNaIiBmaWxsPSIjYzZhNTg3IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNTAzLjggNDcxLjlMLTYgNDg3LjlMMCA2NzEuMUw1MDkuOCA2NTUuMkw1MDMuOCA0NzEuOVoiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNTguNCAyNTQuOUwzMjAuNiA0MjguMUw0OTMuOCA0NjRMNTMxLjYgMjkwLjhMMzU4LjQgMjU0LjlaIiBmaWxsPSIjZWNmZmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjU5LjEgMjk2LjdMNDQ4IDU3Ny41TDgyOC4zIDg1OC4zTDEwMzkuNCA1NzcuNUw2NTkuMSAyOTYuN1oiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNS44IDM3MC40TDI4Ni43IDQzMi4xTDM1Ni40IDE0OS4zTDEwNS41IDg3LjZMMzUuOCAzNzAuNFoiIGZpbGw9IiM1MzQwMmQiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik00NDAuMSAyNDIuOUw0OTcuOCAzMTAuNkw1ODEuNCAyMzQuOUw1MjMuNyAxNjcuMkw0NDAuMSAyNDIuOVoiIGZpbGw9IiNmZmZkZDEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNy44IDg1LjZMMjMuOSAyODQuN0w0MzguMSAzMDguNkw0NTIgMTA5LjVMMzcuOCA4NS42WiIgZmlsbD0iIzZhNGUzOCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTUyNS43IDI4OC43TDQ3NS45IDM2Ni40TDcwMi45IDUwNy44TDc1Mi43IDQzMC4xTDUyNS43IDI4OC43WiIgZmlsbD0iIzA2MDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYgMTBMMzUuOSAyMzdMMTg0NS45LTZMMTgxNi0yMzNMNiAxMFoiIGZpbGw9IiM5YTZiNTEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0xMCA0MTAuMkwtOTEuNiA2NTUuMUwyMzUgNzkwLjVMMzM2LjYgNTQ1LjZMMTAgNDEwLjJaIiBmaWxsPSIjMDAwMjEzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjU1LjEgMzMwLjVMMTQzNS43IDI1MC45TDE0MDMuOC02NS43TDYyMy4zIDExLjlMNjU1LjEgMzMwLjVaIiBmaWxsPSIjOGU1ZjMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDQwLjEgMTMxLjRMMTQxLjQgMzk4LjJMMTkxLjIgNDU0TDQ4OS45IDE4Ny4yTDQ0MC4xIDEzMS40WiIgZmlsbD0iIzMyMjMyMyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTk3LjYgNDA2LjJMODcuNiA0NjUuOUwxNjcuMyA0NzcuOEwxNzcuMyA0MTguMUw5Ny42IDQwNi4yWiIgZmlsbD0iI2VmZGZjZCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTcxNC45IDEyMS41TDU5MS40IDMzNC41TDcxNC45IDQwNC4yTDgzOC40IDE5MS4xTDcxNC45IDEyMS41WiIgZmlsbD0iIzhhNmI0NyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTE5OS4xIDExOS41TC0xNS45IDExOS41TC0xMy45IDQyOC4xTDE5OS4yIDQyOC4xTDE5OS4yIDExOS41TDE5OS4xIDExOS41WiIgZmlsbD0iIzZkNTk0NCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU4Ny40IDQ4OS44TDYzOS4yIDU1Ny41TDgzNi4zIDQwMi4yTDc4NC41IDMzNC41TDU4Ny40IDQ4OS44WiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ0OCA0NzMuOUw0NTYgNTU3LjVMNjI1LjMgNTM1LjZMNjE3LjMgNDUyTDQ0OCA0NzMuOVoiIGZpbGw9IiMwMDAwMDciIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0yIDM5LjhMMTIzLjUgMTUzLjNMMzk2LjMtMTM3LjRMMjc0LjgtMjUwLjlMMiAzOS44WiIgZmlsbD0iIzczNmQ2OCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ4NS45IDQwNC4yTDQ3Ny45IDQ1Nkw1NDcuNiA0NjRMNTU1LjYgNDEyLjJMNDg1LjkgNDA0LjJaIiBmaWxsPSIjZmZlYmQzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTE1LjUgNDc1LjlMMTE5LjUgODAyLjVMNTI3LjcgNzk2LjVMNTIzLjcgNDY5LjlMMTE1LjUgNDc1LjlaIiBmaWxsPSIjMDUwMzBjIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDQ4IDIyM0w0ODkuOCAyMzNMNTI1LjYgODMuN0w0ODMuOCA3My43TDQ0OCAyMjNaIiBmaWxsPSIjZjFhZTgyIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNzM2LjggMjk4LjdMNjczIDMxMC42TDc2MC42IDcwMi45TDgyNC4zIDY5MUw3MzYuOCAyOTguN1oiIGZpbGw9IiMzYzFjMTEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zMjYuNiA0OTEuOEw0ODEuOSA3MzIuN0w1NzkuNSA2NjlMNDI0LjEgNDI4LjFMMzI2LjYgNDkxLjhaIiBmaWxsPSIjMDQwODBlIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMjUwLjkgMTI1LjRMNTgxLjQgMTkuOUw1MjcuNi0xNDcuNEwxOTcuMS00MS44TDI1MC45IDEyNS40WiIgZmlsbD0iI2IyN2M2YSIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYxNy4zIDM4Mi4zTDYxOS4zIDQ2MS45TDk0NS44IDQ0OEw5NDMuOCAzNjguNEw2MTcuMyAzODIuM1oiIGZpbGw9IiMwNDAzMGEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNzguMyA0MDYuMkwzODAuMyA0NDJMNTM5LjYgNDI2LjFMNTM3LjYgMzkwLjNMMzc4LjMgNDA2LjJaIiBmaWxsPSIjZDJkNWQxIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTE3LjUgNDM4LjFMMTA5LjUgNDYwTDIwMS4xIDQ4OS45TDIwOS4xIDQ2OEwxMTcuNSA0MzguMVoiIGZpbGw9IiNlNWQ1YzciIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik03MjQuOCA0NjkuOUw2ODcgNjIzLjNMODQwLjMgNjU3LjJMODc4LjEgNTAzLjlMNzI0LjggNDY5LjlaIiBmaWxsPSIjNmMyYjBlIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNzE4LjggMjQyLjlMOTkzLjYgMzAyLjZMMTA5NS4yLTE2NS4zTDgyMC40LTIyNUw3MTguOCAyNDIuOVoiIGZpbGw9IiM4MTU5MmIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zODAuMyAxNzEuMkwyMDcuMSAyODIuOEwyNjIuOSAzNjguNEw0MzYuMSAyNTYuOUwzODAuMyAxNzEuMloiIGZpbGw9IiM0MDMxMmIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjwvZz4KPC9zdmc+Cg=="><meta data-rh="true" name="twitter:image" content="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gQ3JlYXRlZCB3aXRoIFZlY3Rvcm5hdG9yIChodHRwOi8vdmVjdG9ybmF0b3IuaW8vKSAtLT4KPHN2ZyBoZWlnaHQ9IjEwMCUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9ImZpbGwtcnVsZTpub256ZXJvO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc5Ni41IDU0Mi41IiB3aWR0aD0iMTAwJSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp2ZWN0b3JuYXRvcj0iaHR0cDovL3ZlY3Rvcm5hdG9yLmlvIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxkZWZzLz4KPGNsaXBQYXRoIGlkPSJBcnRib2FyZEZyYW1lIj4KPHJlY3QgaGVpZ2h0PSI1NDIuNSIgd2lkdGg9Ijc5Ni41IiB4PSIwIiB5PSIwIi8+CjwvY2xpcFBhdGg+CjxnIGNsaXAtcGF0aD0idXJsKCNBcnRib2FyZEZyYW1lKSIgaWQ9IlVudGl0bGVkIiB2ZWN0b3JuYXRvcjpsYXllck5hbWU9IlVudGl0bGVkIj4KPHBhdGggZD0iTTAgMEw3OTYuNSAwTDc5Ni41IDBMNzk2LjUgNTQyLjVMNzk2LjUgNTQyLjVMMCA1NDIuNUwwIDU0Mi41TDAgMEwwIDBaIiBmaWxsPSIjNTMzZjM1IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTUuOSAxNTEuM0wyNDQuOSA1MzMuNkwxMzE4LjItMTA1LjZMMTA4OS4yLTQ4Ny45TDE1LjkgMTUxLjNaIiBmaWxsPSIjYzZhNTg3IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNTAzLjggNDcxLjlMLTYgNDg3LjlMMCA2NzEuMUw1MDkuOCA2NTUuMkw1MDMuOCA0NzEuOVoiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNTguNCAyNTQuOUwzMjAuNiA0MjguMUw0OTMuOCA0NjRMNTMxLjYgMjkwLjhMMzU4LjQgMjU0LjlaIiBmaWxsPSIjZWNmZmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjU5LjEgMjk2LjdMNDQ4IDU3Ny41TDgyOC4zIDg1OC4zTDEwMzkuNCA1NzcuNUw2NTkuMSAyOTYuN1oiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNS44IDM3MC40TDI4Ni43IDQzMi4xTDM1Ni40IDE0OS4zTDEwNS41IDg3LjZMMzUuOCAzNzAuNFoiIGZpbGw9IiM1MzQwMmQiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik00NDAuMSAyNDIuOUw0OTcuOCAzMTAuNkw1ODEuNCAyMzQuOUw1MjMuNyAxNjcuMkw0NDAuMSAyNDIuOVoiIGZpbGw9IiNmZmZkZDEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNy44IDg1LjZMMjMuOSAyODQuN0w0MzguMSAzMDguNkw0NTIgMTA5LjVMMzcuOCA4NS42WiIgZmlsbD0iIzZhNGUzOCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTUyNS43IDI4OC43TDQ3NS45IDM2Ni40TDcwMi45IDUwNy44TDc1Mi43IDQzMC4xTDUyNS43IDI4OC43WiIgZmlsbD0iIzA2MDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYgMTBMMzUuOSAyMzdMMTg0NS45LTZMMTgxNi0yMzNMNiAxMFoiIGZpbGw9IiM5YTZiNTEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0xMCA0MTAuMkwtOTEuNiA2NTUuMUwyMzUgNzkwLjVMMzM2LjYgNTQ1LjZMMTAgNDEwLjJaIiBmaWxsPSIjMDAwMjEzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjU1LjEgMzMwLjVMMTQzNS43IDI1MC45TDE0MDMuOC02NS43TDYyMy4zIDExLjlMNjU1LjEgMzMwLjVaIiBmaWxsPSIjOGU1ZjMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDQwLjEgMTMxLjRMMTQxLjQgMzk4LjJMMTkxLjIgNDU0TDQ4OS45IDE4Ny4yTDQ0MC4xIDEzMS40WiIgZmlsbD0iIzMyMjMyMyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTk3LjYgNDA2LjJMODcuNiA0NjUuOUwxNjcuMyA0NzcuOEwxNzcuMyA0MTguMUw5Ny42IDQwNi4yWiIgZmlsbD0iI2VmZGZjZCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTcxNC45IDEyMS41TDU5MS40IDMzNC41TDcxNC45IDQwNC4yTDgzOC40IDE5MS4xTDcxNC45IDEyMS41WiIgZmlsbD0iIzhhNmI0NyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTE5OS4xIDExOS41TC0xNS45IDExOS41TC0xMy45IDQyOC4xTDE5OS4yIDQyOC4xTDE5OS4yIDExOS41TDE5OS4xIDExOS41WiIgZmlsbD0iIzZkNTk0NCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU4Ny40IDQ4OS44TDYzOS4yIDU1Ny41TDgzNi4zIDQwMi4yTDc4NC41IDMzNC41TDU4Ny40IDQ4OS44WiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ0OCA0NzMuOUw0NTYgNTU3LjVMNjI1LjMgNTM1LjZMNjE3LjMgNDUyTDQ0OCA0NzMuOVoiIGZpbGw9IiMwMDAwMDciIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0yIDM5LjhMMTIzLjUgMTUzLjNMMzk2LjMtMTM3LjRMMjc0LjgtMjUwLjlMMiAzOS44WiIgZmlsbD0iIzczNmQ2OCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ4NS45IDQwNC4yTDQ3Ny45IDQ1Nkw1NDcuNiA0NjRMNTU1LjYgNDEyLjJMNDg1LjkgNDA0LjJaIiBmaWxsPSIjZmZlYmQzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTE1LjUgNDc1LjlMMTE5LjUgODAyLjVMNTI3LjcgNzk2LjVMNTIzLjcgNDY5LjlMMTE1LjUgNDc1LjlaIiBmaWxsPSIjMDUwMzBjIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDQ4IDIyM0w0ODkuOCAyMzNMNTI1LjYgODMuN0w0ODMuOCA3My43TDQ0OCAyMjNaIiBmaWxsPSIjZjFhZTgyIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNzM2LjggMjk4LjdMNjczIDMxMC42TDc2MC42IDcwMi45TDgyNC4zIDY5MUw3MzYuOCAyOTguN1oiIGZpbGw9IiMzYzFjMTEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zMjYuNiA0OTEuOEw0ODEuOSA3MzIuN0w1NzkuNSA2NjlMNDI0LjEgNDI4LjFMMzI2LjYgNDkxLjhaIiBmaWxsPSIjMDQwODBlIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMjUwLjkgMTI1LjRMNTgxLjQgMTkuOUw1MjcuNi0xNDcuNEwxOTcuMS00MS44TDI1MC45IDEyNS40WiIgZmlsbD0iI2IyN2M2YSIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYxNy4zIDM4Mi4zTDYxOS4zIDQ2MS45TDk0NS44IDQ0OEw5NDMuOCAzNjguNEw2MTcuMyAzODIuM1oiIGZpbGw9IiMwNDAzMGEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNzguMyA0MDYuMkwzODAuMyA0NDJMNTM5LjYgNDI2LjFMNTM3LjYgMzkwLjNMMzc4LjMgNDA2LjJaIiBmaWxsPSIjZDJkNWQxIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTE3LjUgNDM4LjFMMTA5LjUgNDYwTDIwMS4xIDQ4OS45TDIwOS4xIDQ2OEwxMTcuNSA0MzguMVoiIGZpbGw9IiNlNWQ1YzciIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik03MjQuOCA0NjkuOUw2ODcgNjIzLjNMODQwLjMgNjU3LjJMODc4LjEgNTAzLjlMNzI0LjggNDY5LjlaIiBmaWxsPSIjNmMyYjBlIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNzE4LjggMjQyLjlMOTkzLjYgMzAyLjZMMTA5NS4yLTE2NS4zTDgyMC40LTIyNUw3MTguOCAyNDIuOVoiIGZpbGw9IiM4MTU5MmIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zODAuMyAxNzEuMkwyMDcuMSAyODIuOEwyNjIuOSAzNjguNEw0MzYuMSAyNTYuOUwzODAuMyAxNzEuMloiIGZpbGw9IiM0MDMxMmIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjwvZz4KPC9zdmc+Cg=="><meta data-rh="true" property="og:type" content="article"><meta data-rh="true" property="article:published_time" content="2021-08-12T00:00:00.000Z"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.openlineage.io/blog/dataquality_expectations_facet"><link data-rh="true" rel="alternate" href="https://docs.openlineage.io/blog/dataquality_expectations_facet" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.openlineage.io/blog/dataquality_expectations_facet" hreflang="x-default"><link rel="alternate" type="application/json" href="/blog/feed.json" title="OpenLineage Docs JSON Feed">






<script src="https://plausible.io/js/script.js" defer="defer" data-domain="openlineage.io"></script><link rel="stylesheet" href="/assets/css/styles.67c58870.css">
<link rel="preload" href="/assets/js/runtime~main.0a78d9e5.js" as="script">
<link rel="preload" href="/assets/js/main.83e5ba5d.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#f26522;color:#091E42" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Help chart the course of OpenLineage! The 2023 Ecosystem Survey is live and accepting responses. <a href="https://forms.gle/cPk3skNgnB4iab9H6">Submit yours today</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/ol-logo.svg" alt="OpenLineage Docs" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/ol-logo.svg" alt="OpenLineage Docs" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/getting-started">Getting Started</a><a class="navbar__item navbar__link" href="/resources">Resources</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a class="navbar__item navbar__link" href="/ecosystem">Ecosystem</a><a class="navbar__item navbar__link" href="/community">Community</a><a class="navbar__item navbar__link" href="/docs">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/OpenLineage/openlineage" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class="row"><main class="col col--9 col--offset-1" itemscope="" itemtype="http://schema.org/Blog"><article itemprop="blogPost" itemscope="" itemtype="http://schema.org/BlogPosting"><meta itemprop="image" content="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gQ3JlYXRlZCB3aXRoIFZlY3Rvcm5hdG9yIChodHRwOi8vdmVjdG9ybmF0b3IuaW8vKSAtLT4KPHN2ZyBoZWlnaHQ9IjEwMCUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9ImZpbGwtcnVsZTpub256ZXJvO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc5Ni41IDU0Mi41IiB3aWR0aD0iMTAwJSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp2ZWN0b3JuYXRvcj0iaHR0cDovL3ZlY3Rvcm5hdG9yLmlvIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CjxkZWZzLz4KPGNsaXBQYXRoIGlkPSJBcnRib2FyZEZyYW1lIj4KPHJlY3QgaGVpZ2h0PSI1NDIuNSIgd2lkdGg9Ijc5Ni41IiB4PSIwIiB5PSIwIi8+CjwvY2xpcFBhdGg+CjxnIGNsaXAtcGF0aD0idXJsKCNBcnRib2FyZEZyYW1lKSIgaWQ9IlVudGl0bGVkIiB2ZWN0b3JuYXRvcjpsYXllck5hbWU9IlVudGl0bGVkIj4KPHBhdGggZD0iTTAgMEw3OTYuNSAwTDc5Ni41IDBMNzk2LjUgNTQyLjVMNzk2LjUgNTQyLjVMMCA1NDIuNUwwIDU0Mi41TDAgMEwwIDBaIiBmaWxsPSIjNTMzZjM1IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTUuOSAxNTEuM0wyNDQuOSA1MzMuNkwxMzE4LjItMTA1LjZMMTA4OS4yLTQ4Ny45TDE1LjkgMTUxLjNaIiBmaWxsPSIjYzZhNTg3IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNTAzLjggNDcxLjlMLTYgNDg3LjlMMCA2NzEuMUw1MDkuOCA2NTUuMkw1MDMuOCA0NzEuOVoiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNTguNCAyNTQuOUwzMjAuNiA0MjguMUw0OTMuOCA0NjRMNTMxLjYgMjkwLjhMMzU4LjQgMjU0LjlaIiBmaWxsPSIjZWNmZmZmIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjU5LjEgMjk2LjdMNDQ4IDU3Ny41TDgyOC4zIDg1OC4zTDEwMzkuNCA1NzcuNUw2NTkuMSAyOTYuN1oiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNS44IDM3MC40TDI4Ni43IDQzMi4xTDM1Ni40IDE0OS4zTDEwNS41IDg3LjZMMzUuOCAzNzAuNFoiIGZpbGw9IiM1MzQwMmQiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik00NDAuMSAyNDIuOUw0OTcuOCAzMTAuNkw1ODEuNCAyMzQuOUw1MjMuNyAxNjcuMkw0NDAuMSAyNDIuOVoiIGZpbGw9IiNmZmZkZDEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNy44IDg1LjZMMjMuOSAyODQuN0w0MzguMSAzMDguNkw0NTIgMTA5LjVMMzcuOCA4NS42WiIgZmlsbD0iIzZhNGUzOCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTUyNS43IDI4OC43TDQ3NS45IDM2Ni40TDcwMi45IDUwNy44TDc1Mi43IDQzMC4xTDUyNS43IDI4OC43WiIgZmlsbD0iIzA2MDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYgMTBMMzUuOSAyMzdMMTg0NS45LTZMMTgxNi0yMzNMNiAxMFoiIGZpbGw9IiM5YTZiNTEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0xMCA0MTAuMkwtOTEuNiA2NTUuMUwyMzUgNzkwLjVMMzM2LjYgNTQ1LjZMMTAgNDEwLjJaIiBmaWxsPSIjMDAwMjEzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjU1LjEgMzMwLjVMMTQzNS43IDI1MC45TDE0MDMuOC02NS43TDYyMy4zIDExLjlMNjU1LjEgMzMwLjVaIiBmaWxsPSIjOGU1ZjMwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDQwLjEgMTMxLjRMMTQxLjQgMzk4LjJMMTkxLjIgNDU0TDQ4OS45IDE4Ny4yTDQ0MC4xIDEzMS40WiIgZmlsbD0iIzMyMjMyMyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTk3LjYgNDA2LjJMODcuNiA0NjUuOUwxNjcuMyA0NzcuOEwxNzcuMyA0MTguMUw5Ny42IDQwNi4yWiIgZmlsbD0iI2VmZGZjZCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTcxNC45IDEyMS41TDU5MS40IDMzNC41TDcxNC45IDQwNC4yTDgzOC40IDE5MS4xTDcxNC45IDEyMS41WiIgZmlsbD0iIzhhNmI0NyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTE5OS4xIDExOS41TC0xNS45IDExOS41TC0xMy45IDQyOC4xTDE5OS4yIDQyOC4xTDE5OS4yIDExOS41TDE5OS4xIDExOS41WiIgZmlsbD0iIzZkNTk0NCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU4Ny40IDQ4OS44TDYzOS4yIDU1Ny41TDgzNi4zIDQwMi4yTDc4NC41IDMzNC41TDU4Ny40IDQ4OS44WiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ0OCA0NzMuOUw0NTYgNTU3LjVMNjI1LjMgNTM1LjZMNjE3LjMgNDUyTDQ0OCA0NzMuOVoiIGZpbGw9IiMwMDAwMDciIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0yIDM5LjhMMTIzLjUgMTUzLjNMMzk2LjMtMTM3LjRMMjc0LjgtMjUwLjlMMiAzOS44WiIgZmlsbD0iIzczNmQ2OCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ4NS45IDQwNC4yTDQ3Ny45IDQ1Nkw1NDcuNiA0NjRMNTU1LjYgNDEyLjJMNDg1LjkgNDA0LjJaIiBmaWxsPSIjZmZlYmQzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTE1LjUgNDc1LjlMMTE5LjUgODAyLjVMNTI3LjcgNzk2LjVMNTIzLjcgNDY5LjlMMTE1LjUgNDc1LjlaIiBmaWxsPSIjMDUwMzBjIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDQ4IDIyM0w0ODkuOCAyMzNMNTI1LjYgODMuN0w0ODMuOCA3My43TDQ0OCAyMjNaIiBmaWxsPSIjZjFhZTgyIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNzM2LjggMjk4LjdMNjczIDMxMC42TDc2MC42IDcwMi45TDgyNC4zIDY5MUw3MzYuOCAyOTguN1oiIGZpbGw9IiMzYzFjMTEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zMjYuNiA0OTEuOEw0ODEuOSA3MzIuN0w1NzkuNSA2NjlMNDI0LjEgNDI4LjFMMzI2LjYgNDkxLjhaIiBmaWxsPSIjMDQwODBlIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMjUwLjkgMTI1LjRMNTgxLjQgMTkuOUw1MjcuNi0xNDcuNEwxOTcuMS00MS44TDI1MC45IDEyNS40WiIgZmlsbD0iI2IyN2M2YSIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYxNy4zIDM4Mi4zTDYxOS4zIDQ2MS45TDk0NS44IDQ0OEw5NDMuOCAzNjguNEw2MTcuMyAzODIuM1oiIGZpbGw9IiMwNDAzMGEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zNzguMyA0MDYuMkwzODAuMyA0NDJMNTM5LjYgNDI2LjFMNTM3LjYgMzkwLjNMMzc4LjMgNDA2LjJaIiBmaWxsPSIjZDJkNWQxIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTE3LjUgNDM4LjFMMTA5LjUgNDYwTDIwMS4xIDQ4OS45TDIwOS4xIDQ2OEwxMTcuNSA0MzguMVoiIGZpbGw9IiNlNWQ1YzciIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik03MjQuOCA0NjkuOUw2ODcgNjIzLjNMODQwLjMgNjU3LjJMODc4LjEgNTAzLjlMNzI0LjggNDY5LjlaIiBmaWxsPSIjNmMyYjBlIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNzE4LjggMjQyLjlMOTkzLjYgMzAyLjZMMTA5NS4yLTE2NS4zTDgyMC40LTIyNUw3MTguOCAyNDIuOVoiIGZpbGw9IiM4MTU5MmIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik0zODAuMyAxNzEuMkwyMDcuMSAyODIuOEwyNjIuOSAzNjguNEw0MzYuMSAyNTYuOUwzODAuMyAxNzEuMloiIGZpbGw9IiM0MDMxMmIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjwvZz4KPC9zdmc+Cg=="><header><h1 class="title_f1Hy" itemprop="headline">Expecting Great Quality with OpenLineage Facets</h1><div class="container_mt6G margin-vert--md"><time datetime="2021-08-12T00:00:00.000Z" itemprop="datePublished">August 12, 2021</time> · <!-- -->13 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--6 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro" itemprop="author" itemscope="" itemtype="https://schema.org/Person"><div class="avatar__name"><span itemprop="name">Michael Collado</span></div></div></div></div></div></header><div id="post-content" class="markdown" itemprop="articleBody"><p>Good data is paramount to making good decisions- but how can you trust the quality of your data and its dependencies?</p><p><img loading="lazy" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjwhLS0gQ3JlYXRlZCB3aXRoIFZlY3Rvcm5hdG9yIChodHRwOi8vdmVjdG9ybmF0b3IuaW8vKSAtLT4KPHN2ZyBoZWlnaHQ9IjEwMCUiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgc3R5bGU9ImZpbGwtcnVsZTpub256ZXJvO2NsaXAtcnVsZTpldmVub2RkO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDsiIHZlcnNpb249IjEuMSIgdmlld0JveD0iMCAwIDc5Ni41IDE3My4xNSIgd2lkdGg9IjEwMCUiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6dmVjdG9ybmF0b3I9Imh0dHA6Ly92ZWN0b3JuYXRvci5pbyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgo8ZGVmcy8+CjxjbGlwUGF0aCBpZD0iQXJ0Ym9hcmRGcmFtZSI+CjxyZWN0IGhlaWdodD0iMTczLjE1IiB3aWR0aD0iNzk2LjUiIHg9IjAiIHk9IjAiLz4KPC9jbGlwUGF0aD4KPGcgY2xpcC1wYXRoPSJ1cmwoI0FydGJvYXJkRnJhbWUpIiBpZD0iVW50aXRsZWQiIHZlY3Rvcm5hdG9yOmxheWVyTmFtZT0iVW50aXRsZWQiPgo8cGF0aCBkPSJNMCAwTDc5Ni41IDBMNzk2LjUgMEw3OTYuNSAxNzMuMTVMNzk2LjUgMTczLjE1TDAgMTczLjE1TDAgMTczLjE1TDAgMEwwIDBaIiBmaWxsPSIjNzM2MTUxIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMjM5IDE2OS4yNkw3MDMgODY0LjJMOTA4IDcyNC44Mkw0NDQgMjkuODdMMjM5IDE2OS4yNloiIGZpbGw9IiNmZmZmZmYiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik03NjYuNjMgNDcuNzlMNDczLjkyIDEyNy40NEw1ODkuNDEgNTQxLjYyTDg4Mi4xMiA0NjJMNzY2LjYzIDQ3Ljc5WiIgZmlsbD0iIzFjMGEwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTMyNC41NyAxMDkuNTJMMzk2LjI2IDE5NS4xNEw3NDQuNzMtOTkuNTZMNjczLjA0LTE4NS4xOUwzMjQuNTcgMTA5LjUyWiIgZmlsbD0iI2Y3ZjVkZCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTYxLjczIDQ1LjhMNjMuNzIgMjY2LjgzTDMwMi42NyAyNjAuODVMMzAwLjY4IDM5LjgzTDYxLjczIDQ1LjhaIiBmaWxsPSIjNDMyZDIzIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMTU3LjMxIDMzLjg1TDQzNC4wOSA4My42M0w1NDkuNTktNTM5LjYzTDI3Mi44LTU4OS40MUwxNTcuMzEgMzMuODVaIiBmaWxsPSIjNDkyZjIwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNTQzLjYxIDBMNjM3LjIgMTUxLjM0TDY3MS4wNSAxMjkuNDNMNTc3LjQ2LTE5LjkxTDU0My42MSAwWiIgZmlsbD0iI2U1YjY4NyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTI4Mi43NiAxNjcuMjZMMzk2LjI2IDI1Mi44OUw0NzUuOTEgMTQ1LjM2TDM2Mi40MSA1OS43NEwyODIuNzYgMTY3LjI2WiIgZmlsbD0iI2QzZmZmZiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTY4NC45OSAxNjkuMjZMNzc0LjYgMzMyLjU0TDk3MS43MyAyMjMuMDJMODgyLjEyIDU5Ljc0TDY4NC45OSAxNjkuMjZaIiBmaWxsPSIjMDAwMDAwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjEzLjMgNzUuNjdMMTIxOC42NCAxNDUuMzZMMTI3MC40Mi0zMTguNkw2NjUuMDgtMzg4LjI5TDYxMy4zIDc1LjY3WiIgZmlsbD0iI2E1NzA0MiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU3Ny40NiAxMDMuNTVMNTQxLjYyIDE3MS4yNUw2ODQuOTkgMjQwLjk0TDcyMC44MyAxNzMuMjRMNTc3LjQ2IDEwMy41NVoiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik02NDcuMTYgOTUuNThMNjI3LjI0IDExNS40OUw2ODUgMTYzLjI4TDcwNC45MSAxNDMuMzdMNjQ3LjE2IDk1LjU4WiIgZmlsbD0iI2Q2YjI4YiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTI3Ljg4IDEuOTlMLTk3LjU3IDM4NC4zMUwxOTEuMTYgNDc3LjlMMzE2LjYxIDk1LjU4TDI3Ljg4IDEuOTlaIiBmaWxsPSIjNTk0NDM1IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMjYwLjg1IDY5LjY5TDI5Mi43MSAxMjEuNDdMNDMwLjExIDMxLjg2TDM5OC4yNS0xNy45MkwyNjAuODUgNjkuNjlaIiBmaWxsPSIjMjcxZTIwIiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNTMxLjY2IDUzLjc2TDY3MS4wNSA1NS43Nkw2NzEuMDUtMjEuOUw1MzEuNjYtMjMuODlMNTMxLjY2IDUzLjc2WiIgZmlsbD0iI2M4YTc4NCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTMzMC41NSA5MS42TC0yNDIuOTMgMTAxOS41MkwtMTIzLjQ2IDEwOTEuMkw0NDguMDMgMTYzLjI4TDMzMC41NSA5MS42WiIgZmlsbD0iI2QyZmJmZiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU0NS42IDM3LjgzTDUxNS43MyA1My43Nkw3ODYuNTQgNDg1Ljg3TDgxNi40MSA0NjkuOTRMNTQ1LjYgMzcuODNaIiBmaWxsPSIjMTIwYzA4IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDg1Ljg3IDEwNS41NEw0NTIuMDEgMTIzLjQ2TDU3My40OCAzMjguNTZMNjA3LjMzIDMxMC42M0w0ODUuODcgMTA1LjU0WiIgZmlsbD0iI2EyNzk1OCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTIzLjg5IDEwOS41MkwxMTEuNTEgMjAxLjEyTDY0Ny4xNi0zMDYuNjVMNTU5LjU0LTM5OC4yNUwyMy44OSAxMDkuNTJaIiBmaWxsPSIjNzI1YTQ1IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMjAzLjExIDE1NS4zMkwyNzguNzcgMTg5LjE3TDMyNC41NyA4NS42MkwyNDguOTEgNTEuNzdMMjAzLjExIDE1NS4zMloiIGZpbGw9IiMzMjJhMjMiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik01MDEuOCAxNTEuMzRMNDQwLjA3IDE4OS4xN0w1OTEuNCA0MTguMTZMNjUzLjEzIDM4MC4zM0w1MDEuOCAxNTEuMzRaIiBmaWxsPSIjZjlkOGI1IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNjc3LjAyIDUuOTdMNzgwLjU3IDExMy41TDEyMzQuNTgtMzE0LjYyTDExMzEuMDMtNDIyLjE0TDY3Ny4wMiA1Ljk3WiIgZmlsbD0iIzc1NGMyYSIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU3NS40NyA3NS42N0w1NTcuNTUgOTEuNkw4MjIuMzkgMzMyLjU0TDg0MC4zMSAzMTYuNjFMNTc1LjQ3IDc1LjY3WiIgZmlsbD0iIzExMGYwZiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTQ1OS45OCAxOS45MUwzOTYuMjYgODMuNjNMNDUwLjAyIDEzNS40MUw1MTMuNzQgNzEuNjlMNDU5Ljk4IDE5LjkxWiIgZmlsbD0iI2U3Y2FhOSIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTU2NS41MSAyOS44N0w2MzkuMTkgNjEuNzNMNzMwLjc5LTE1My4zM0w2NTcuMTEtMTg1LjE5TDU2NS41MSAyOS44N1oiIGZpbGw9IiNhMDdmNjEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik03NjQuNjQgMTAzLjU1TDcxNC44NiAyNDQuOTJMMTAwOS41NiAzNDIuNUwxMDU5LjM1IDIwMS4xMkw3NjQuNjQgMTAzLjU1WiIgZmlsbD0iIzAwMDAwMCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTY1MS4xNCA5NS41OEwxMjEyLjY3IDIzNC45N0wxMjE2LjY1IDIxMy4wNkw2NTUuMTIgNzMuNjhMNjUxLjE0IDk1LjU4WiIgZmlsbD0iIzAwMDAwMyIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTY3LjcgNEwtNDQ0LTMxLjg2TC00NTQgMTIzLjQ2TDU1Ljc2IDE1OS4zTDY3LjcgNFoiIGZpbGw9IiM1YTQ2MzIiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik00MzYuMDggNzEuNjlMNDg1Ljg3IDg5LjYxTDYxMS4zMS0yNDQuOTJMNTYxLjUzLTI2Mi44NUw0MzYuMDggNzEuNjlaIiBmaWxsPSIjZWRkNmI0IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNNDg3Ljg2IDExNS40OUw1MTEuNzUgMTE5LjQ3TDU2NS41MS0xMTMuNUw1NDEuNjItMTE3LjQ4TDQ4Ny44NiAxMTUuNDlaIiBmaWxsPSIjYzc5MzY4IiBmaWxsLXJ1bGU9Im5vbnplcm8iIG9wYWNpdHk9IjEiIHN0cm9rZT0ibm9uZSIvPgo8cGF0aCBkPSJNMzcyLjM2IDc3LjY2TDIxOS4wNCAyMjUuMDFMMjk4LjY5IDMwNi42NUw0NTIuMDEgMTU5LjNMMzcyLjM2IDc3LjY2WiIgZmlsbD0iI2QzZjRmZiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTUzMy42NSA5Ljk2TDU1OS41NCAyNS44OUw2MTMuMy02Ny43TDU4Ny40Mi04My42M0w1MzMuNjUgOS45NloiIGZpbGw9IiNmN2Y3ZGEiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjxwYXRoIGQ9Ik02ODMgMTUzLjMzTDcxMC44OCA0MDguMjFMMTAzNy40NCAzNjguMzhMMTAwOS41NiAxMTMuNUw2ODMgMTUzLjMzWiIgZmlsbD0iIzAwMDAwNCIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTIyNyAxNy45MkwtNjcuNyA1OS43NEwyMS45IDcwNC45TDMxNi42MSA2NjMuMDlMMjI3IDE3LjkyWiIgZmlsbD0iIzY1NGUzZiIgZmlsbC1ydWxlPSJub256ZXJvIiBvcGFjaXR5PSIxIiBzdHJva2U9Im5vbmUiLz4KPHBhdGggZD0iTTk1LjU4IDEwOS41MkwxNjUuMjcgMTIzLjQ2TDE4Ny4xOCA0TDExNy40OC04TDk1LjU4IDEwOS41MloiIGZpbGw9IiM3NzYxNDgiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMSIgc3Ryb2tlPSJub25lIi8+CjwvZz4KPC9zdmc+Cg==#banner" width="797" height="173" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-parable-of-bad-data">The Parable of Bad Data<a href="#the-parable-of-bad-data" class="hash-link" aria-label="Direct link to The Parable of Bad Data" title="Direct link to The Parable of Bad Data">​</a></h2><p>Several years ago, I worked as a developer on the experimentation team at Amazon, which owned the code libraries and
data processing systems that supported experimentation on the amazon.com website (among other systems). Developers used
our libraries and a microservice we maintained to “trigger” an experiment for a customer- that is, the customer was
randomized into either control or treatment and the resulting assignment was recorded in the logs, which my team
consumed in the analysis of the data later on. One of the interesting parts of my job was helping our users diagnose
problems with their experiment results.</p><p>A classic example was a Kindle developer who was prototyping a new feature for book pages that would make the site more
engaging for Kindle owners- perhaps a “look inside” feature, or maybe some better recommendations. A customer would come
to the website and the developer’s code would determine if the customer belonged in <em>Control</em> or <em>Treatment</em>. If <em>Control</em>,
the assignment was logged and no feature was shown- the site looked to the customer as it always had. But if the
assignment was <em>Treatment</em>, the code would check the customer’s account to determine if they owned a Kindle device and,
if yes, the assignment was logged and the customer saw the fancy new feature on the books page. </p><p>The experiment showed the developer’s feature would be wildly successful- an increase of over $10 in Kindle book
purchases per customer on average over the course of the 2 weeks the experiment ran- projected to be tens of billions of
dollars in annual revenue due to this one feature!</p><p>With data in hand, the developer requested tons of resources to build the feature up to production standards. After
three months and two dozen people’s labor, the feature was ready to ship. The developers deployed their new service and
the incredible feature was unleashed. For days afterward, everyone watched the metrics dashboards waiting for that
hockey stick uptick in the revenue graphs 📈. But it never materialized! The graph was flat. No change at all! Weeks
went by. Nothing. How could the experiment results be so far from reality?</p><p>Of course, if you’ve ever run A/B tests, you probably already recognized the developer’s mistake. In their randomization
logic, customers who were assigned control were logged and forgotten, while customers who were assigned treatment were
logged only after validating that they owned a Kindle device. It turned out the total number of customers who came to
amazon.com was far greater than the number of customers who owned a Kindle device. And if you divide the total sum of
Kindle book sales by all of the amazon.com customers, regardless of whether they own a Kindle device, that average
will come out quite a lot lower than if you calculate the average Kindle book revenue from only customers who own Kindles.</p><p><img loading="lazy" alt="Yoda says, poorly run experiments lead to bad data. Bad data leads to bad insights. Bad insights lead to bad decisions. Bad decisions lead to suffering" src="/assets/images/bad_experiment-8384ed6a25865b9e0c8142c741da3f42.png" width="558" height="447" class="img_ev3q"></p><p>In reality, this story never happened. Why? Because we knew the adage- Bad Data is Worse than No Data. In the story,
people took data of poor quality and used it to justify bad decisions. In our system, we checked the quality of the data
and, if we detected assignment imbalances, we simply invalidated the experiment and hid the results. Over the years, I
can’t count the number of times our users asked us to just give them partial results or just exclude certain segments or
to let them know if things were “trending” the right way. Our policy was firm- if we couldn’t trust the quality of the
data, the results were meaningless and we would not surface them in our system.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="data-driven-depends-on-data-quality">Data-Driven Depends On Data-Quality<a href="#data-driven-depends-on-data-quality" class="hash-link" aria-label="Direct link to Data-Driven Depends On Data-Quality" title="Direct link to Data-Driven Depends On Data-Quality">​</a></h2><p>Today, most businesses consider themselves data-driven. The stereotype of the maverick CEO leading with his or her gut
is mostly antiquated, with a handful of exceptions. And yet, even though people know intellectually that data is only
useful if it is correct, we tend to stop digging once we find some data that confirms our pre-existing assumptions. We
justify bad decisions by claiming that they are “data-based” without ever validating the quality of our sources. Where
did that data come from? How old is it? Is the logic that generated it correct? Is it derived from some other dataset?
What is the quality of that dataset?
<img loading="lazy" alt="Data-driven: You keep using that word. I do not think it means what you think it means" src="/assets/images/data_driven-5f55fde8883a9dc5147edff1d6ebe117.png" width="500" height="432" class="img_ev3q"></p><p>Thankfully, data quality validation is becoming more and more common in data engineering organizations. In part, this is
due to the prevalence of new tools and their integration with common workflow engines which we already use to schedule
the jobs that generate and process our data. One such tool that has been gaining in popularity is called <a href="https://docs.greatexpectations.io" target="_blank" rel="noopener noreferrer"><em>Great
Expectations</em></a>, a Python-based framework for defining assertions about data sets
which easily integrates with existing workflow tools, such as Airflow. </p><p>In software development, testing the behavior of our code with unit and integration tests has been common practice for
years. Similarly, using Great Expectations, a data engineer can assert that a dataset has a row count that falls within
an expected range, that column values are not null, or that values match a specified regular expression. One can even
create custom expectations, such as validating that the number of records in treatment is roughly the same as the number
of records in control (this post is not intended to be an in-depth tutorial on setting up Great Expectations; if you
want to read more on its capabilities and to get started, I recommend the going through
the <a href="https://docs.greatexpectations.io/en/latest/guides/tutorials/quick_start.html" target="_blank" rel="noopener noreferrer">Quick Start tutorial</a>).</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="a-sample-assertion-suite">A Sample Assertion Suite<a href="#a-sample-assertion-suite" class="hash-link" aria-label="Direct link to A Sample Assertion Suite" title="Direct link to A Sample Assertion Suite">​</a></h3><p>As a simple example, imagine a table of new customers that you need to import into your Data Warehouse. Before
importing, we want to check the data quality of this new batch of customers. One example suite of assertions we could
test is below:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;data_asset_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Dataset&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expectation_suite_name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;customers_suite&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;expectations&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;expectation_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_table_row_count_to_be_between&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;kwargs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;max_value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;min_value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;expectation_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_table_column_count_to_equal&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;kwargs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;expectation_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_table_columns_to_match_ordered_list&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;kwargs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;column_list&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;created_at&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;updated_at&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;address&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;phone&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;city_id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;expectation_type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_column_values_to_be_unique&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;kwargs&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;column&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token property" style="color:#36acaa">&quot;meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This sample suite contains 4 data quality assertions- that the dataset contains between 100 and 1000 rows, that the
table contains exactly 8 columns, that they match the explicit list of column names we expect, and that the <code>email</code> column
contains only distinct values.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-data-quality-checks-to-an-airflow-pipeline">Adding Data Quality Checks to an Airflow pipeline<a href="#adding-data-quality-checks-to-an-airflow-pipeline" class="hash-link" aria-label="Direct link to Adding Data Quality Checks to an Airflow pipeline" title="Direct link to Adding Data Quality Checks to an Airflow pipeline">​</a></h3><p>With a suite of assertions in hand, we can update our Airflow DAG to only import data into our Data Warehouse if it
matches our expectations. A simple DAG might look like this</p><div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> airflow </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> DAG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> airflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">operators</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">bigquery_operator </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> BigQueryOperator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> airflow</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">utils</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dates </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> days_ago</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> great_expectations_provider</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">operators</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">great_expectations </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> GreatExpectationsOperator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dag </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> DAG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&#x27;etl_customers&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    schedule_interval</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;@daily&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    catchup</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    default_args</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">default_args</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;Loads newly registered customers daily.&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t1 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BigQueryOperator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    task_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;if_not_exists&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sql</span><span class="token operator" style="color:#393A34">=</span><span class="token triple-quoted-string string" style="color:#e3116c">&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  CREATE TABLE IF NOT EXISTS food_delivery.customers (</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  id         INT64,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  created_at TIME,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  updated_at TIME,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  name       STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  email      STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  address    STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  phone      STRING,</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  city_id    INT64</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  &#x27;&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_legacy_sql</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dag</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t2 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> GreatExpectationsOperator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    expectation_suite_name</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;customers_suite&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    batch_kwargs</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;table&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;tmp_customers&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;datasource&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;food_delivery_db&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dag</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    task_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;customers_expectation&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t3 </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> BigQueryOperator</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    task_id</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;etl&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    sql</span><span class="token operator" style="color:#393A34">=</span><span class="token triple-quoted-string string" style="color:#e3116c">&#x27;&#x27;&#x27;</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    SELECT id, created_at, updated_at, name, email, address, phone, city_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">    FROM food_delivery.tmp_customers</span><br></span><span class="token-line" style="color:#393A34"><span class="token triple-quoted-string string" style="color:#e3116c">  &#x27;&#x27;&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    destination_dataset_table</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&#x27;airflow_marquez.food_delivery.customers&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    use_legacy_sql</span><span class="token operator" style="color:#393A34">=</span><span class="token boolean" style="color:#36acaa">False</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dag</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">dag</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">t1 </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> t2 </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> t3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>This is great! Our DAG creates our target table in BigQuery (if it doesn’t already exist), checks the quality of the
<code>tmp_customers</code> table by running the <code>customers_suite</code> defined earlier, then imports <em>only if all</em> of the data quality
checks pass.</p><p>And thus ended all data quality problems forever.</p><p>Just kidding.</p><p>Because reality is never so straightforward. In reality, the recommendations team wanted to start generating
recommendations for new customers without waiting until the next day, so they built a data pipeline to start consuming
from the <code>tmp_customers</code> table directly. And the supply chain folks wanted to start detecting what recipes are gaining
popularity so they can predict what supplies will need to be restocked sooner, so they started reading from the both
<code>tmp_orders</code> table and the <code>tmp_customers</code> table before they’re available in the DW. Oh, and the scheduling team needs
an idea of the geography of the various customers that are ordering and what the distances are between restaurants and
customers so they can get the right number of drivers in the right neighborhoods and of course the marketing team wants
to use all of this data to make predictions about how much to spend on the right search engine and social media ads and
they absolutely cannot wait until tomorrow at 8AM to update their models.
<img loading="lazy" alt="I am the gatekeeper" src="/assets/images/gatekeeper-619fdddfc62d56485e393cd9adb059f4.png" width="640" height="360" class="img_ev3q"></p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="tracing-data-quality-with-openlineage-facets">Tracing Data Quality With OpenLineage Facets<a href="#tracing-data-quality-with-openlineage-facets" class="hash-link" aria-label="Direct link to Tracing Data Quality With OpenLineage Facets" title="Direct link to Tracing Data Quality With OpenLineage Facets">​</a></h2><p>Users are never satisfied with the way things are supposed to work. There’s always a reason to work around gatekeepers-
oftentimes, very good reasons that have real business impact- and data engineering is full of creative and resourceful
people who absolutely will find a way to get at that data. Even at Amazon, the experiment data was available in the
click stream logs, so resourceful users could (and sometimes did) calculate their own experiment results if they really
wanted to. So it’s important not just to have data quality checks, but to trace the impact of that data throughout an
organization.</p><p>The OpenLineage standard uses <a href="https://openlineage.io/blog/extending-with-facets/" target="_blank" rel="noopener noreferrer">Facets</a> to augment the core data
model with useful information about the jobs, runs, and datasets reported on. One interesting detail about facets is
that they can be attached to an entity after the fact. In the Marquez reference implementation, a dataset version is
created every time a job run writes to or otherwise modifies a dataset. <em>Output</em> facets, such as the new record count or
the number of bytes written, are attached directly to the dataset version when the job run completes. But consuming
jobs can also attach facets to the version of the dataset that exists at the start time of the job’s execution.</p><p>In the OpenLineage Airflow integration, Great Expectations tasks, such as the one in our example DAG above, are
evaluated after they run and the expectation results (as well as some other data quality metrics) are collected
into a
<a href="https://github.com/OpenLineage/OpenLineage/blob/main/spec/OpenLineage.json#L446-L499" target="_blank" rel="noopener noreferrer">DataQuality Metrics Input Dataset Facet</a>
, which is reported to the server along with the rest of the lineage metadata. In Marquez, we recognize the version of
the dataset that was read by the job run and the data quality metadata is permanently associated with that dataset
version. The impact of this is that any job that reads that data, whether it happens before or after the dataset quality
assertion, can be linked to the data quality facet recorded (provided that the dataset version doesn’t change between
the data quality check and the read job).</p><p>This integration is extremely straightforward to get working. If you already have the Marquez Airflow DAG running in
your Airflow workflows, there’s nothing to do! Great Expectations tasks are already being detected and the metrics and
assertion statuses are already being reported to your configured instance of Marquez.</p><p>If you’ve never integrated Marquez with your Airflow setup, add a couple
of <a href="https://github.com/OpenLineage/OpenLineage/tree/main/integration/airflow#configuration" target="_blank" rel="noopener noreferrer">environment variables</a>
and <a href="https://github.com/OpenLineage/OpenLineage/tree/main/integration/airflow#usage" target="_blank" rel="noopener noreferrer">change one line of code</a>:</p><div class="language-diff codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-diff codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted prefix deleted" style="color:#d73a49">-</span><span class="token deleted-sign deleted line" style="color:#d73a49"> from airflow import DAG</span><br></span><span class="token-line" style="color:#393A34"><span class="token deleted-sign deleted line" style="color:#d73a49"></span><span class="token inserted-sign inserted prefix inserted" style="color:#36acaa">+</span><span class="token inserted-sign inserted line" style="color:#36acaa"> from marquez_airflow import DAG</span><br></span><span class="token-line" style="color:#393A34"><span class="token inserted-sign inserted line" style="color:#36acaa"></span><span class="token plain">from airflow.contrib.operators.bigquery_operator import BigQueryOperator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from airflow.utils.dates import days_ago</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">from great_expectations_provider.operators.great_expectations import GreatExpectationsOperator</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>I’ve previously written
about <a href="https://openlineage.io/blog/explore-lineage-api/" target="_blank" rel="noopener noreferrer">how to determine the version of the dataset that was read by a particular job run</a>
. With Great Expectations now integrated into my Airflow DAG, I want to see what the data quality metrics are for the
latest version of the <code>customers</code> dataset that was processed by my ETL job. I’ll hit my datakin demo instance:</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://demo.datakin.com/api/v1/namespaces/food_delivery/jobs/etl.etl_delivery_7_days&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">less</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;etl.etl_delivery_7_days&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;BATCH&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;etl.etl_delivery_7_days&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;createdAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2021-07-23T19:32:03.401782Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;updatedAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2021-08-06T05:11:03.604573Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;inputs&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public.customers&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    //</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;latestRun&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;1043e596-ccb8-4bfb-8fc2-7ee066253248&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;jobVersion&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;etl.etl_delivery_7_days&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;bc6c294b-b0eb-3160-a06d-1ff9ba3a4e1c&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;inputVersions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public.customers&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4c33f292-40a9-304d-b43f-c7ffb2256e7f&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      // </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>With the input version of the <code>public.customers</code> dataset, I can query Marquez for all the metadata we have about that
specific version of the dataset.</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">$ </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://demo.datakin.com/api/v1/namespaces/food_delivery/datasets/public.customers/versions/4c33f292-40a9-304d-b43f-c7ffb2256e7f&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> jq </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">less</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public.customers&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;DB_TABLE&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public.customers&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;physicalName&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;public.customers&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;createdAt&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;2021-08-06T05:02:59.189118Z&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;version&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;4c33f292-40a9-304d-b43f-c7ffb2256e7f&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;namespace&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;food_delivery&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;sourceName&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;analytics_db&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;fields&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;INTEGER&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;tags&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;The unique ID of the customer.&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    // </span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain">.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&quot;facets&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;stats&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;size&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">53362712</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;rowCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4969</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dataSource&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;uri&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;jdbc:postgresql://localhost:3306/deliveries&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;analytics_db&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;description&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;A table for customers.&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;dataQuality&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;bytes&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">53362712</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;rowCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4969</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;columnMetrics&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;nullCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;distinctCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4969</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;name&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;nullCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;distinctCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4969</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&quot;email&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;nullCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;distinctCount&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4969</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;greatExpectations_assertions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&quot;assertions&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;success&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;expectationType&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_table_row_count_to_be_between&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;success&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;expectationType&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_column_to_exist&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;success&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;columnId&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;expectationType&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_column_values_to_be_unique&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;success&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;columnId&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;id&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;expectationType&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_column_values_to_not_be_null&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;success&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> true,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;columnId&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;created_at&quot;</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&quot;expectationType&quot;</span><span class="token builtin class-name">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;expect_column_values_to_not_be_null&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        //</span><span class="token punctuation" style="color:#393A34">..</span><span class="token punctuation" style="color:#393A34">..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Note the <code>facets</code> field contains several properties- <code>stats</code>, <code>dataSource</code>, <code>description</code>, <code>dataQuality</code>
and <code>greatExpectations_assertions</code>. Each of those describes some attribute about the dataset version. Some of the facets
are attached at write-time, some are attached later- when the dataset is read.</p><p>In our <a href="https://demo.datakin.com" target="_blank" rel="noopener noreferrer">Datakin demo</a>, we have a lot more assertions than what I included in the sample suite
above and that can be seen in this response. In addition to counting rows and columns, we also validate that id columns
are unique and non-null, timestamps fall within specified ranges (did you know that if you accidentally write a
timestamp too far in the future, certain JDBC drivers will overflow the Calendar instance they use for converting
timezones?), and emails match expected regular expressions.</p><p>With the ability to attach data quality facets to dataset versions and the ability to trace the specific versions of
datasets read by and written to by specific job runs, I can trust whether the data I’m looking at is good data or bad
data. And if my data quality checks fail, I can find out whether I need to contact somebody over in marketing or
recommendations to <a href="https://openlineage.io/blog/backfilling-airflow-dags-using-marquez/" target="_blank" rel="noopener noreferrer">backfill their pipelines</a> once
the issue has been corrected.</p><p><img loading="lazy" alt="Good data, bad data" src="/assets/images/bad_data-2dfc03116878cb8acc920569c17bed30.png" width="600" height="315" class="img_ev3q"></p><p>Whether your business is an e-commerce shop that wants to improve its customer experience or a music streaming service
that wants to make better listening recommendations or an autonomous vehicle company trying to improve the car’s ability
to detect double parked vehicles, the quality of your data is paramount to making good decisions. Quality testing tools
are out there and, chances are, they already work with the pipeline workflow tool you’re using today. And with
OpenLineage support, you can be confident in the quality of the data at every stage in your pipeline.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/blog/0.1-release"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Introducing OpenLineage 0.1.0</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/blog/extending-with-facets"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">Extending OpenLineage with Facets</div></a></nav></main><div class="col col--2"><div class="tableOfContents_bqdL thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-parable-of-bad-data" class="table-of-contents__link toc-highlight">The Parable of Bad Data</a></li><li><a href="#data-driven-depends-on-data-quality" class="table-of-contents__link toc-highlight">Data-Driven Depends On Data-Quality</a><ul><li><a href="#a-sample-assertion-suite" class="table-of-contents__link toc-highlight">A Sample Assertion Suite</a></li><li><a href="#adding-data-quality-checks-to-an-airflow-pipeline" class="table-of-contents__link toc-highlight">Adding Data Quality Checks to an Airflow pipeline</a></li></ul></li><li><a href="#tracing-data-quality-with-openlineage-facets" class="table-of-contents__link toc-highlight">Tracing Data Quality With OpenLineage Facets</a></li></ul></div></div></div></div></div></div>
<script src="/assets/js/runtime~main.0a78d9e5.js"></script>
<script src="/assets/js/main.83e5ba5d.js"></script>
</body>
</html>